{"version":3,"file":"module.js","mappings":"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","sources":["webpack://aggregations-io-datasource/./styles.css","webpack://aggregations-io-datasource/../node_modules/css-loader/dist/runtime/api.js","webpack://aggregations-io-datasource/../node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://aggregations-io-datasource/../node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://aggregations-io-datasource/external amd \"@emotion/css\"","webpack://aggregations-io-datasource/external amd \"@grafana/data\"","webpack://aggregations-io-datasource/external amd \"@grafana/runtime\"","webpack://aggregations-io-datasource/external amd \"@grafana/ui\"","webpack://aggregations-io-datasource/external amd \"lodash\"","webpack://aggregations-io-datasource/external amd \"react\"","webpack://aggregations-io-datasource/webpack/bootstrap","webpack://aggregations-io-datasource/webpack/runtime/compat get default export","webpack://aggregations-io-datasource/webpack/runtime/define property getters","webpack://aggregations-io-datasource/webpack/runtime/hasOwnProperty shorthand","webpack://aggregations-io-datasource/webpack/runtime/make namespace object","webpack://aggregations-io-datasource/webpack/runtime/nonce","webpack://aggregations-io-datasource/./types.ts","webpack://aggregations-io-datasource/./styles.css?072f","webpack://aggregations-io-datasource/./components/SharedEditor.tsx","webpack://aggregations-io-datasource/./components/VariableEditor.tsx","webpack://aggregations-io-datasource/./datasource.ts","webpack://aggregations-io-datasource/./components/QueryEditor.tsx","webpack://aggregations-io-datasource/./module.ts","webpack://aggregations-io-datasource/./components/ConfigEditor.tsx"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.upper {\n  margin-top: 10px !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./styles.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,2BAA2B;AAC7B\",\"sourcesContent\":[\".upper {\\n  margin-top: 10px !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","module.exports = __WEBPACK_EXTERNAL_MODULE__644__;","module.exports = __WEBPACK_EXTERNAL_MODULE__305__;","module.exports = __WEBPACK_EXTERNAL_MODULE__545__;","module.exports = __WEBPACK_EXTERNAL_MODULE__388__;","module.exports = __WEBPACK_EXTERNAL_MODULE__980__;","module.exports = __WEBPACK_EXTERNAL_MODULE__650__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","import { DataSourceJsonData } from '@grafana/data';\nimport { DataQuery } from '@grafana/schema';\n\nexport enum LimitType {\n  Top = 'Top',\n  Bottom = 'Bottom',\n}\n\nexport interface MyQuery extends DataQuery {\n  filterId: string | null;\n  aggregationId: number | null;\n  calculation: Calculation | null;\n  limit: number | null;\n  limitType: LimitType | null;\n  //groupingFilters: { [key: string]: string[] } | null;\n  groupingFilters: GroupingFilterItem[] | null;\n  grouping_filter_includes: {[key: string]: boolean} | null;\n  grouping_filter_mapping: { [key: string]: GroupingFilterMappingItem } | null;\n  grouping_filter_mapping_str: string;\n  datasourceId: number | null;\n  filter_definition: FilterDefinition | null;\n  selected_agg: FilterDefinitionAggregation | null;\n  alias: string | null;\n  excludeEmptyGroupings: boolean;\n  filterDefinitionName: string | null;\n  longResult: boolean;\n  includeGroupingLabels: boolean | null;\n  mode: string;\n  groupingName: string | null;\n  includeAggregateOption: boolean;\n  rand_id: string;\n  includeIncompleteIntervals: boolean;\n  percentile: number | null;\n  fast_mode: boolean;\n  shouldRecalculate: boolean;\n}\n\n\n\nexport interface GroupingFilterItem {\n  grouping: string;\n  filters: string[] | null;\n  returnGroupingValues: boolean;\n}\n\nexport interface GroupingFilterMappingItem {\n  id: string;\n  name: string;\n}\n\nexport const DEFAULT_QUERY: Partial<MyQuery> = {\n  limitType: LimitType.Top,\n  excludeEmptyGroupings: false,\n  includeGroupingLabels: true,\n  includeAggregateOption: true,\n  includeIncompleteIntervals: true,\n};\n\n/**\n * These are options configured for each DataSource instance\n */\nexport interface MyDataSourceOptions extends DataSourceJsonData {\n  path?: string;\n}\n\nexport interface Items {\n  filter_definitions: FilterDefinition[];\n}\n\n/**\n * Value that is used in the backend, but never sent over HTTP to the frontend\n */\nexport interface MySecureJsonData {\n  apiKey?: string;\n}\n\nexport interface FilterDefinition {\n  id: string;\n  name: string;\n  filter: string;\n  groupings: string[];\n  aggregations: FilterDefinitionAggregation[];\n}\n\nexport interface FilterDefinitionAggregation {\n  id: number;\n  subFilter: string;\n  calculations: Calculation[];\n  calculationField: string;\n  name: string;\n}\n\nexport enum Calculation {\n  Count = 'COUNT',\n  Sum = 'SUM',\n  Avg = 'AVG',\n  Max = 'MAX',\n  Min = 'MIN',\n  Approx_Count_Distinct = 'APPROX_COUNT_DISTINCT',\n  Percentiles = 'PERCENTILES',\n}\n\nexport function calculationPretty(value: Calculation ): string {\n   switch(value){\n    case Calculation.Count:\n      return 'Count';          \n      case Calculation.Sum:\n        return 'Sum';        \n      case Calculation.Approx_Count_Distinct:\n        return 'Approx. Count Distinct';\n      case Calculation.Avg:\n        return 'Avg';\n      case Calculation.Max:\n        return 'Max';\n      case Calculation.Min:\n        return 'Min';\n      case Calculation.Percentiles:\n        return 'Percentiles';            \n  }\n}\n\nexport function stringToCalculation(value: string): Calculation | undefined {\n  if (\n    Object.values(Calculation)\n      .map((z) => z.valueOf())\n      .indexOf(value) >= 0\n  ) {\n    return value as Calculation;\n  }\n  return undefined;\n}\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./styles.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./styles.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import React, { ChangeEvent, PureComponent } from 'react';\nimport { QueryEditorProps, QueryVariableModel, SelectableValue } from '@grafana/data';\nimport { DataSource } from '../datasource';\nimport {\n  Calculation,\n  GroupingFilterMappingItem,\n  FilterDefinition,\n  FilterDefinitionAggregation,\n  LimitType,\n  MyDataSourceOptions,\n  MyQuery,\n  stringToCalculation,\n  calculationPretty,\n} from '../types';\nimport {\n  InlineFieldRow,\n  InlineField,\n  Select,\n  Input,\n  RadioButtonGroup,\n  VerticalGroup,\n  InlineSwitch,\n  HorizontalGroup,\n  stylesFactory,\n  Checkbox,\n  InlineLabel,\n} from '@grafana/ui';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { css } from '@emotion/css';\nimport '../styles.css';\n\nfunction selectable(value?: FilterDefinition | null): SelectableValue<FilterDefinition> {\n  if (!value) {\n    return {};\n  }\n\n  return { label: value.name, value: value };\n}\n\nconst limitTypes = [\n  { value: LimitType.Top, label: 'Top' },\n  { value: LimitType.Bottom, label: 'Bottom' },\n];\n\nfunction selectableString(value?: string | null): SelectableValue<string> {\n  if (!value) {\n    return {};\n  }\n\n  return { label: value, value: value };\n}\nfunction selectableFDAgg(value?: FilterDefinitionAggregation | null): SelectableValue<FilterDefinitionAggregation> {\n  if (!value) {\n    return {};\n  }\n\n  return { label: value.name, value: value };\n}\nfunction selectableCalculation(value?: string | null): SelectableValue<Calculation> {\n  if (value === undefined || value === null) {\n    return {};\n  }\n\n  const conv = stringToCalculation(value);\n  return { label: conv === undefined ? '' : calculationPretty(conv), value: conv };\n}\nexport interface SharedProps extends QueryEditorProps<DataSource, MyQuery, MyDataSourceOptions> {\n  mode: string;\n}\nexport class SharedEditor extends PureComponent<SharedProps> {\n  constructor(props: SharedProps) {\n    super(props);\n\n    //console.log('con',this.props.query);\n    if (this.props.query.includeGroupingLabels === undefined) {\n      this.props.query.includeGroupingLabels = true;\n    }\n    if (this.props.query.includeIncompleteIntervals === undefined) {\n      this.props.query.includeIncompleteIntervals = true;\n    }\n    if(this.props.query.shouldRecalculate === undefined){\n      this.props.query.shouldRecalculate = false;\n    }\n    if(this.props.query.longResult === undefined){\n      this.props.query.longResult = false;\n    }\n    this.this_is_query_editor = props.mode === 'query';\n    this.onRunQuery = this.onRunQuery.bind(this);\n    //console.log(this.props)\n    this.known_filters = [];\n    if (this.props.query.rand_id === undefined) {\n      this.props.query.rand_id = Math.random().toString(20).substr(2, 8);\n    }\n    const { onChange, query } = this.props;\n    onChange({\n      ...query,\n      datasourceId: props.datasource.id,\n      excludeEmptyGroupings: false,\n      includeGroupingLabels: this.props.query.includeGroupingLabels === undefined || this.props.query.includeGroupingLabels === null ? true : this.props.query.includeGroupingLabels,\n      mode: props.mode,\n    });\n  }\n  styles = getStyles();\n  this_is_query_editor: boolean;\n  known_filters: Array<SelectableValue<FilterDefinition>>;\n  got_filters = false;\n  onRunQuery(\n    props: Readonly<SharedProps> &\n      Readonly<{\n        children?: React.ReactNode;\n      }>\n  ) {\n    //console.log('checking', props.query);\n    if (\n      props.query.filter_definition &&\n      props.query.filter_definition !== null &&\n      props.query.filter_definition !== undefined\n    ) {\n      props.query.filterDefinitionName = props.query.filter_definition!.name;\n      if (props.query.selected_agg && props.query.selected_agg !== null) {\n        props.query.filterDefinitionName = `${props.query.filterDefinitionName} - ${props.query.selected_agg.name}`;\n        if (props.query.calculation !== null) {\n          props.query.filterDefinitionName = `${props.query.filterDefinitionName} - ${calculationPretty(props.query.calculation)}`;\n        }\n      }\n    }\n    if (\n      props.query.filterId &&\n      props.query.filterId !== '' &&\n      props.query.calculation !== null &&\n      //props.query.aggregation !== '' &&\n      props.query.aggregationId &&\n      props.query.aggregationId > 0 &&\n      (!props.query.limit || props.query.limit == null || (props.query.limit && props.query.limit > 0)) &&\n      props.query.filter_definition &&\n      props.query.filter_definition !== null &&\n      (props.query.calculation !== Calculation.Percentiles ||\n        (props.query.calculation === Calculation.Percentiles &&\n          props.query.percentile != null &&\n          props.query.percentile > 0 &&\n          props.query.percentile <= 1))\n    ) {\n      //console.log('ok to run', this.props.query);\n      props.query.excludeEmptyGroupings = false;\n      if (this.this_is_query_editor) {\n        //let ts = getTemplateSrv();\n        //console.log(ts.getVariables());\n      }\n      this.props.onRunQuery();\n    } else {\n      // console.log('NOT OK TO RUN ', this.props.query);\n    }\n  }\n  getFilterDefinitions(): Array<SelectableValue<FilterDefinition>> {\n    const result: Array<SelectableValue<FilterDefinition>> = [];\n    if (!this.got_filters) {\n      this.props.datasource.getFilterDefinitions().then((fds: FilterDefinition[]) => {\n        fds.forEach((fd: FilterDefinition) => {\n          if (this.props.query.filterId != null && this.props.query.filterId === fd.id) {\n            this.props.query.filter_definition = fd;\n          }\n          result.push({ label: fd.name, value: fd });\n        });\n      });\n\n      this.known_filters = result;\n      this.got_filters = true;\n    } else {\n      return this.known_filters;\n    }\n    return result;\n  }\n\n  onFilterDefinitionChange = (event: SelectableValue<FilterDefinition>) => {\n    const { onChange, query } = this.props;\n    const sel_fd_agg = event.value!.aggregations.length === 1 ? event.value!.aggregations[0] : null;\n    const sel_agg =\n      sel_fd_agg == null ? null : sel_fd_agg.calculations.length === 1 ? sel_fd_agg.calculations[0] : null;\n    onChange({\n      ...query,\n      filterId: event.value!.id,\n      filter_definition: event.value!,\n      selected_agg: sel_fd_agg,\n      aggregationId: sel_fd_agg == null ? null : sel_fd_agg.id,\n      calculation: sel_agg,\n      filterDefinitionName: event.value!.name,\n      grouping_filter_mapping: {},\n      grouping_filter_mapping_str: '',\n    });\n  };\n\n  getSpecificGroupingOptions(): Array<SelectableValue<string>> {\n    if (!this.props.query.filter_definition || this.props.query.filter_definition.groupings == null) {\n      return [];\n    }\n    return this.props.query.filter_definition.groupings.map((x) => selectableString(x));\n  }\n  getFDAggs(): Array<SelectableValue<FilterDefinitionAggregation>> {\n    if (!this.props.query.filter_definition) {\n      return [];\n    }\n    return this.props.query.filter_definition.aggregations.map((x) => selectableFDAgg(x));\n  }\n\n  onFDAggChange = (event: SelectableValue<FilterDefinitionAggregation>) => {\n    const { onChange, query } = this.props;\n    let new_agg =\n      query.calculation === null\n        ? null\n        : event.value!.calculations.includes(query.calculation)\n          ? query.calculation\n          : null;\n    if (new_agg == null) {\n      if (event.value!.calculations.length === 1) {\n        new_agg = event.value!.calculations[0];\n      }\n    }\n    onChange({ ...query, aggregationId: event.value!.id, selected_agg: event.value!, calculation: new_agg });\n  };\n\n  getCalculationOptions(): Array<SelectableValue<Calculation>> {\n    if (!this.props.query.selected_agg) {\n      return [];\n    }\n    return this.props.query.selected_agg!.calculations.map((x) => selectableCalculation(x));\n  }\n\n  onAggChange = (event: SelectableValue<Calculation>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, calculation: event.value! });\n  };\n  onPercentileChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    try {\n      if (event.target.value.trim() !== '') {\n        let num = parseFloat(event.target.value);\n        onChange({ ...query, percentile: num });\n      } else {\n        onChange({ ...query, percentile: null });\n      }\n    } catch { }\n  };\n  onLimitChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    try {\n      if (event.target.value.trim() !== '') {\n        let num = parseInt(event.target.value, 10);\n        onChange({ ...query, limit: num });\n      } else {\n        onChange({ ...query, limit: null });\n      }\n    } catch { }\n  };\n  onAliasChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    try {\n      if (event.target.value.trim() !== '') {\n        onChange({ ...query, alias: event.target.value });\n      } else {\n        onChange({ ...query, alias: null });\n      }\n    } catch { }\n  };\n  onLimitTypeChange = (event: LimitType) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, limitType: event });\n  };\n\n  onIncompleteIntervalsChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, includeIncompleteIntervals: event.target.checked });\n    this.onRunQuery(this.props);\n  };\n\n\n  onShouldRecalculateChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, shouldRecalculate: event.target.checked });\n    this.onRunQuery(this.props);\n  };\n\n  onLongChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, longResult: event.target.checked });\n    this.onRunQuery(this.props);\n  };\n\n  onIncludeAggChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n\n    onChange({ ...query, includeAggregateOption: event.target.checked });\n  };\n\n  onGroupingLabelChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, includeGroupingLabels: event.target.checked });\n    this.onRunQuery(this.props);\n  };\n  onSpecificGroupingChange = (event: SelectableValue<string>) => {\n    const { onChange, query } = this.props;\n    onChange({ ...query, groupingName: event.value || null });\n    this.onRunQuery(this.props);\n  };\n\n  onGroupingFilterIncludeChange = (event: boolean, grp: string) => {\n    const { onChange, query } = this.props;\n    if (!query.grouping_filter_includes || query.grouping_filter_includes === null) {\n      query.grouping_filter_includes = {};\n    }\n    query.grouping_filter_includes[grp] = event;\n\n    onChange({ ...query, grouping_filter_includes: query.grouping_filter_includes });\n    this.onRunQuery(this.props);\n\n  }\n  onGroupingFilterMapSelectChange = (event: SelectableValue<GroupingFilterMappingItem>, grp: string) => {\n    const { onChange, query } = this.props;\n    //console.log('qfmsc', query.grouping_filter_mapping, event, grp);\n\n    if (query.grouping_filter_mapping == null) {\n      query.grouping_filter_mapping = {};\n    }\n    if (!event || event == null || !event.value || event.value == null) {\n      delete query.grouping_filter_mapping[grp];\n    } else {\n      query.grouping_filter_mapping[grp] = event.value!;\n      if (event.value!.id === '$__agg') {\n        if (query.grouping_filter_includes === undefined || query.grouping_filter_includes === null) {\n          query.grouping_filter_includes = {};\n        }\n        query.grouping_filter_includes[grp] = false;\n      }\n    }\n\n    let str = '';\n    if (Object.keys(query.grouping_filter_mapping).length > 0) {\n      str = Object.entries(query.grouping_filter_mapping)\n        .map((x) => `${x[0]}=\"\\$${x[1].name}\"`)\n        .join('|');\n    }\n    onChange({ ...query, grouping_filter_mapping: query.grouping_filter_mapping, grouping_filter_mapping_str: str, grouping_filter_includes: query.grouping_filter_includes });\n    this.onRunQuery(this.props);\n  };\n  render() {\n    const show_grouping_ops =\n      this.this_is_query_editor &&\n      this.props.query.filter_definition &&\n      this.props.query.filter_definition.groupings &&\n      this.props.query.filter_definition.groupings.length > 0;\n    let grouping_ops;\n    let grouping_filters;\n    let grouping_filters_tbl;\n\nlet incomplete_intervals=<InlineField label=\"Incomplete Intervals\" labelWidth={22} tooltip={'Allow showing incomplete intervals.'}>\n<InlineSwitch\n  onChange={this.onIncompleteIntervalsChange}\n  value={this.props.query.includeIncompleteIntervals}\n></InlineSwitch>\n</InlineField>;\nlet recalc_intervals=<InlineField label=\"Recalculate Intervals\" labelWidth={22} tooltip={'Should results be re-aggregated to fit, according to Query Options defined above?'}>\n<InlineSwitch\n  onChange={this.onShouldRecalculateChange}\n  value={this.props.query.shouldRecalculate}\n></InlineSwitch>\n</InlineField>;\nif(this.this_is_query_editor){\n  grouping_ops=<InlineFieldRow>\n  {incomplete_intervals}\n  {recalc_intervals} \n </InlineFieldRow>;\n}\n\n\n    if (show_grouping_ops) {\n      grouping_ops = (\n        <InlineFieldRow>\n          <InlineField\n            label=\"Long Result\"\n            labelWidth={15}\n            tooltip={\n              'Useful for displaying in tabular format, each grouping value will be represented as a separate column.'\n            }\n          >\n            <InlineSwitch onChange={this.onLongChange} value={this.props.query.longResult}></InlineSwitch>\n          </InlineField>\n          {incomplete_intervals}\n          {recalc_intervals}\n          <InlineField\n            label=\"Grouping Labels\"\n            labelWidth={20}\n            tooltip={'When displaying series values, include grouping labels with their values'}\n          >\n            <InlineSwitch\n              onChange={this.onGroupingLabelChange}\n              value={this.props.query.includeGroupingLabels === null ? false : this.props.query.includeGroupingLabels}\n            ></InlineSwitch>\n          </InlineField>\n        </InlineFieldRow>\n      );\n      let variables = getTemplateSrv()\n        .getVariables()\n        .map((x) => {\n          const basic: SelectableValue<GroupingFilterMappingItem> = {\n            value: { id: x.id, name: x.name },\n            label: x.label || x.name,\n          };\n          if (x.type !== 'query') {\n            return basic;\n          }\n          let mq = (x as QueryVariableModel).query as MyQuery;\n          if (mq === undefined) {\n            return basic;\n          }\n          let gfm: GroupingFilterMappingItem = { id: mq.rand_id || x.id, name: x.name };\n\n          if (\n            mq.filterId !== null &&\n            mq.filterId !== undefined &&\n            mq.groupingName !== null &&\n            mq.groupingName !== undefined &&\n            mq.groupingName.trim() !== ''\n          ) {\n            return {\n              value: gfm,\n              label: x.label || x.name,\n              description: `${mq.groupingName} on ${mq.filterDefinitionName}`,\n            };\n          } else {\n            return {\n              value: gfm,\n              label: x.label || x.name,\n              description: 'Incomplete variable definition',\n              isDisabled: true,\n            };\n          }\n        });\n      variables.unshift({\n        value: { id: '$__agg', name: '$__agg' },\n        label: 'IGNORED',\n        description: 'do not include this grouping',\n      });\n      let all_names = [\n        ...new Set([\n          ...this.props.query.filter_definition!.groupings,\n          ...Object.keys(this.props.query.grouping_filter_mapping || {}),\n        ]),\n      ];\n      if (all_names.length > 0) {\n        grouping_filters = all_names.map((x) => {\n          const selected =\n            variables.find((z) => z.value?.id === (this.props.query.grouping_filter_mapping || {})[x]?.id) || null;\n          const force_exclude = selected !== null && selected.value?.id === '$__agg';\n          const force_include = selected === null;\n          const included = (this.props.query.grouping_filter_includes || {})[x];\n          //console.log('INCL:',x, (this.props.query.grouping_filter_includes||{})[x], included, selected);\n          return (\n            <tr key={x}>\n              <td style={{ width: 'min-content' }}>\n                <InlineLabel width={'auto'}>{x}</InlineLabel>\n              </td>\n              <td style={{ width: 'min-content', textAlign: 'center', verticalAlign: 'middle' }}>\n                <Checkbox width=\"auto\" disabled={force_exclude || force_include} value={force_exclude ? false : force_include ? true : included === undefined ? true : included}\n                  onChange={(q) => this.onGroupingFilterIncludeChange(q.currentTarget.checked, x)}\n                ></Checkbox>\n              </td>\n              <td style={{ width: '100%' }}>\n                <Select\n                  isClearable={true}\n                  options={variables}\n                  value={selected}\n                  allowCustomValue={false}\n                  onChange={(q) => this.onGroupingFilterMapSelectChange(q, x)}\n\n                />\n              </td>\n            </tr>\n          );\n        });\n        //grouping_filters.unshift(<div style={{ minWidth: '600px', height: 0 }}></div>, <h4>Grouping Filters</h4>);\n        grouping_filters_tbl = <><div style={{ display: 'flex', marginRight: 'auto', flexDirection: 'column' }}><div style={{ minWidth: '600px', height: 0 }}></div><h4>Grouping Filters</h4>\n          <table>\n            <thead><tr><th style={{ width: 'min-content' }}><InlineLabel>Grouping</InlineLabel></th><th style={{ width: 'min-content' }}><InlineLabel tooltip={\"Whether to include this grouping as a returned series to be charted, or just apply the filter\"}>Include</InlineLabel></th>\n              <th style={{ width: '100%' }}><InlineLabel>Filter</InlineLabel></th></tr></thead>\n            <tbody>{grouping_filters}</tbody>\n          </table>\n        </div>\n        </>;\n      }\n    }\n\n    let filter_field = (\n      <InlineField label=\"Filter\" labelWidth={this.this_is_query_editor?15:30} tooltip=\"Specify Filter to work with\">\n        { }\n        <Select\n          allowCustomValue={false}\n          value={selectable(this.props.query.filter_definition)}\n          //placeholder=\"table name\"\n          onChange={this.onFilterDefinitionChange}\n          options={this.getFilterDefinitions()}\n          onBlur={() => {\n            this.onRunQuery(this.props);\n          }}\n          width={50}\n        />\n      </InlineField>\n    );\n\n    return (\n      <div className=\"upper\">\n        <HorizontalGroup width=\"100%\" align=\"flex-start\" justify=\"space-between\" spacing=\"xs\">\n          <div style={{ width: '95%' }}>\n            {/* width={this.props.query.filter_definition && this.props.query.filter_definition.groupings && this.props.query.filter_definition.groupings.length > 0 ? '60%' : '100%'} */}\n            <VerticalGroup>\n              {!this.this_is_query_editor && <InlineFieldRow>{filter_field}</InlineFieldRow>}\n              <InlineFieldRow>\n                {this.this_is_query_editor && filter_field}\n                {!this.this_is_query_editor && (\n                  <InlineField label=\"Grouping\" labelWidth={this.this_is_query_editor?15:30}>\n                    { }\n                    <Select\n                      allowCustomValue={false}\n                      value={selectableString(this.props.query.groupingName)}\n                      onChange={this.onSpecificGroupingChange}\n                      options={this.getSpecificGroupingOptions()}\n                      onBlur={() => {\n                        this.onRunQuery(this.props);\n                      }}\n                      width={50}\n                    />\n                  </InlineField>\n                )}\n                {!this.this_is_query_editor && (\n                  <InlineFieldRow>\n                    {' '}\n                    <InlineField\n                      tooltip=\"Include an 'Aggregate All' option in this variable selector\"\n                      label=\"Include Aggregate Option\"\n                      labelWidth={30}\n                    >\n                      { }\n                      <InlineSwitch\n                        onChange={this.onIncludeAggChange}\n                        value={this.props.query.includeAggregateOption}\n                      ></InlineSwitch>\n                    </InlineField>\n                  </InlineFieldRow>\n                )}\n              </InlineFieldRow>\n              <InlineFieldRow>\n                {this.this_is_query_editor && (\n                  <InlineField label=\"Aggregation\" labelWidth={15}>\n                    { }\n                    <Select\n                      allowCustomValue={false}\n                      value={selectableFDAgg(this.props.query.selected_agg)}\n                      //placeholder=\"table name\"\n                      onChange={this.onFDAggChange}\n                      options={this.getFDAggs()}\n                      onBlur={() => {\n                        this.onRunQuery(this.props);\n                      }}\n                      width={50}\n                    />\n                  </InlineField>\n                )}\n              </InlineFieldRow>\n              <InlineFieldRow>\n                {this.this_is_query_editor && this.props.query != null && (\n                  <InlineField label=\"Calculation\" labelWidth={15}>\n                    { }\n                    <Select\n                      allowCustomValue={false}\n                      value={selectableCalculation(this.props.query.calculation)}\n                      //placeholder=\"table name\"\n                      onChange={this.onAggChange}\n                      options={this.getCalculationOptions()}\n                      onBlur={() => {\n                        this.onRunQuery(this.props);\n                      }}\n                      width={this.props.query.calculation === Calculation.Percentiles ? 20 : 50}\n                    />\n                  </InlineField>\n                )}\n                {this.this_is_query_editor &&\n                  this.props.query?.calculation != null &&\n                  this.props.query.calculation === Calculation.Percentiles && (\n                    <InlineField\n                      label=\"Percentile\"\n                      tooltip=\"Enter Percentile as Decimal between 0 and 1, so P99 should be '0.99'\"\n                      labelWidth={15}\n                    >\n                      { }\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        max=\"1\"\n                        step=\"0.05\"\n                        value={this.props.query.percentile == null ? undefined : this.props.query.percentile}\n                        //placeholder=\"table name\"\n                        onChange={this.onPercentileChange}\n                        width={20}\n                        onBlur={() => {\n                          this.onRunQuery(this.props);\n                        }}\n                      />\n                    </InlineField>\n                  )}\n              </InlineFieldRow>\n              {this.this_is_query_editor && (\n                <InlineFieldRow>\n                  <InlineField\n                    label=\"Limit\"\n                    labelWidth={15}\n                    tooltip=\"Per time slice, only include the Top/Bottom N grouped values.\"\n                  >\n                    { }\n                    <RadioButtonGroup<LimitType>\n                      value={this.props.query.limitType || LimitType.Top}\n                      options={limitTypes}\n                      onChange={this.onLimitTypeChange}\n                    />\n                  </InlineField>\n\n                  <InlineField>\n                    { }\n\n                    <Input\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"999999\"\n                      step=\"1\"\n                      value={this.props.query.limit === null ? undefined : this.props.query.limit!}\n                      //placeholder=\"table name\"\n                      onChange={this.onLimitChange}\n                      onBlur={() => {\n                        this.onRunQuery(this.props);\n                      }}\n                      width={20}\n                    />\n                  </InlineField>\n                  <InlineField label=\"Alias\" labelWidth={15}>\n                    { }\n\n                    <Input\n                      type=\"text\"\n                      value={this.props.query.alias || undefined}\n                      //placeholder=\"table name\"\n                      onChange={this.onAliasChange}\n                      onBlur={() => {\n                        this.onRunQuery(this.props);\n                      }}\n                      width={50}\n                    />\n                  </InlineField>\n                </InlineFieldRow>\n              )}\n              {grouping_ops}\n            </VerticalGroup>\n          </div>\n          <VerticalGroup align=\"flex-start\" hidden={!this.this_is_query_editor}>\n            {grouping_filters_tbl}\n          </VerticalGroup>\n        </HorizontalGroup>\n      </div>\n    );\n  }\n}\nconst getStyles = stylesFactory(() => {\n  return {\n    upper: css`\n      margin-top: 10px !important;\n    `,\n  };\n});\n","import React from 'react';\nimport { QueryEditorProps } from '@grafana/data';\nimport { DataSource } from '../datasource';\nimport { MyDataSourceOptions, MyQuery } from '../types';\nimport { SharedEditor } from './SharedEditor';\n\ntype Props = QueryEditorProps<DataSource, MyQuery, MyDataSourceOptions>;\n\nexport function VariableEditor(props: Props) {\n  return <SharedEditor {...props} query={{ ...props.query, refId: 'tempvar' }} mode=\"variables\" />;\n}\n","import {\n  DataSourceInstanceSettings,\n  CoreApp,\n  MetricFindValue,\n  VariableSupportType,\n  DataQueryRequest,\n  ScopedVars,\n  VariableWithOptions,\n} from '@grafana/data';\nimport { DataSourceWithBackend, getTemplateSrv } from '@grafana/runtime';\n\nimport { MyQuery, MyDataSourceOptions, DEFAULT_QUERY, FilterDefinition, GroupingFilterItem } from './types';\nimport { VariableEditor } from 'components/VariableEditor';\nimport { uniqueId } from 'lodash';\n\nexport class DataSource extends DataSourceWithBackend<MyQuery, MyDataSourceOptions> {\n  constructor(instanceSettings: DataSourceInstanceSettings<MyDataSourceOptions>) {\n    super(instanceSettings);\n\n    this.variables = {\n      getType: () => VariableSupportType.Custom,\n      editor: VariableEditor as any,\n      query: (request: DataQueryRequest<MyQuery>) => {\n        const queries = request.targets.map((query) => {\n          return { ...query, refId: query.refId || uniqueId('tempVar') };\n        });\n        return this.query({ ...request, targets: queries });\n      },\n    };\n  }\n\n  applyTemplateVariables(query: MyQuery, scopedVars: ScopedVars): Record<string, any> {\n    //console.log('scoped:',scopedVars)\n    let s = getTemplateSrv();\n    let curr = s.getVariables();\n    const rel: { [key: string]: GroupingFilterItem } = {};\n    let hasany = false;\n    //console.log('curr:',curr);\n    query.fast_mode = true;\n    if (scopedVars !== null && scopedVars !== undefined) {\n      //console.log('SCOPED', scopedVars, curr);\n    }\n    if (query.grouping_filter_mapping !== undefined && query.grouping_filter_mapping != null) {\n      Object.entries(query.grouping_filter_mapping).forEach((kv) => {\n        let k = kv[0];\n        let val = kv[1];\n         let fi =  {} as GroupingFilterItem;\n         fi.grouping=k;\n         \n        if (val.id === '$__agg') {          \n          fi.filters =  [val.id];\n          fi.returnGroupingValues=false;\n          hasany = true;\n        } else {\n          if(query.grouping_filter_includes!=null && query.grouping_filter_includes[k]!==undefined){\n            fi.returnGroupingValues=query.grouping_filter_includes[k];            \n          }else{\n            fi.returnGroupingValues=true;\n          }\n          let matching = curr.find(\n            (x) => x.id === val.id || (x.type === 'query' && (x.query as MyQuery)?.rand_id === val.id)\n          ) as VariableWithOptions;\n          if (matching !== undefined) {\n            if (scopedVars[matching.id] !== undefined) {\n              fi.filters=[scopedVars[matching.id]?.value];              \n            } else {\n              if (typeof matching.current.value === 'string') {\n                fi.filters = [matching.current.value];\n              } else {\n                fi.filters = matching.current.value;\n              }\n            }\n\n            hasany = true;\n          }\n        }\n        rel[k]=fi;\n      });\n    }\n    // for(var i=0;i<curr.length;i++){\n    // var this_var = curr[i];\n\n    //   if(this_var.query && this_var.query.specific_grouping){\n    //     rel[this_var.query.specific_grouping]=this_var.current.value;\n    //   }\n    // }\n    //console.log(rel);\n    const interpolatedQuery: MyQuery = {\n      ...query,\n      groupingFilters: hasany ? Object.values(rel).map(z=> z) : null,\n    };\n    return interpolatedQuery;\n  }\n  async getFilterDefinitions(): Promise<FilterDefinition[]> {\n    return this.getResource('filterDefinitions');\n  }\n  getDefaultQuery(_: CoreApp): Partial<MyQuery> {\n    return DEFAULT_QUERY;\n  }\n  async metricFindQuery(query: any, options?: any): Promise<MetricFindValue[]> {\n    const response = await this.postResource('groupingValues', query);\n\n    // Convert query results to a MetricFindValue[]\n    const values = response.data.map((frame: any) => ({ text: frame }));\n\n    return values;\n  }\n}\n","import React, { PureComponent } from 'react';\nimport { SharedEditor } from './SharedEditor';\nimport { DataSource } from '../datasource';\nimport { MyDataSourceOptions, MyQuery } from '../types';\nimport { QueryEditorProps } from '@grafana/data';\n\ntype Props = QueryEditorProps<DataSource, MyQuery, MyDataSourceOptions>;\n\nexport class QueryEditor extends PureComponent<Props> {\n  constructor(props: Props) {\n    super(props);\n  }\n  render() {\n    return (\n      <div>\n        <SharedEditor {...this.props} mode=\"query\"></SharedEditor>\n      </div>\n    );\n  }\n}\n","import { DataSourcePlugin } from '@grafana/data';\nimport { DataSource } from './datasource';\nimport { ConfigEditor } from './components/ConfigEditor';\nimport { QueryEditor } from './components/QueryEditor';\nimport { MyQuery, MyDataSourceOptions } from './types';\n\nexport const plugin = new DataSourcePlugin<DataSource, MyQuery, MyDataSourceOptions>(DataSource)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n","import React, { ChangeEvent } from 'react';\nimport { InlineField, SecretInput } from '@grafana/ui';\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { MyDataSourceOptions, MySecureJsonData } from '../types';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<MyDataSourceOptions> {}\n\nexport function ConfigEditor(props: Props) {\n  const { onOptionsChange, options } = props;\n\n  // Secure field (only sent to the backend)\n  const onAPIKeyChange = (event: ChangeEvent<HTMLInputElement>) => {\n    onOptionsChange({\n      ...options,\n      secureJsonData: {\n        apiKey: event.target.value,\n      },\n    });\n  };\n\n  const onResetAPIKey = () => {\n    onOptionsChange({\n      ...options,\n      secureJsonFields: {\n        ...options.secureJsonFields,\n        apiKey: false,\n      },\n      secureJsonData: {\n        ...options.secureJsonData,\n        apiKey: '',\n      },\n    });\n  };\n\n  const { secureJsonFields } = options;\n  const secureJsonData = (options.secureJsonData || {}) as MySecureJsonData;\n\n  return (\n    <div className=\"gf-form-group\">\n      <InlineField label=\"API Token\" labelWidth={12}>\n        <SecretInput\n          isConfigured={(secureJsonFields && secureJsonFields.apiKey) as boolean}\n          value={secureJsonData.apiKey || ''}\n          placeholder=\"secure json field (backend only)\"\n          width={40}\n          onReset={onResetAPIKey}\n          onChange={onAPIKeyChange}\n        />\n      </InlineField>\n    </div>\n  );\n}\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__WEBPACK_EXTERNAL_MODULE__644__","__WEBPACK_EXTERNAL_MODULE__305__","__WEBPACK_EXTERNAL_MODULE__545__","__WEBPACK_EXTERNAL_MODULE__388__","__WEBPACK_EXTERNAL_MODULE__980__","__WEBPACK_EXTERNAL_MODULE__650__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","LimitType","DEFAULT_QUERY","limitType","excludeEmptyGroupings","includeGroupingLabels","includeAggregateOption","includeIncompleteIntervals","calculationPretty","Calculation","locals","limitTypes","Top","label","Bottom","selectableString","selectableFDAgg","name","selectableCalculation","conv","values","z","valueOf","indexOf","stringToCalculation","SharedEditor","PureComponent","onRunQuery","props","query","filter_definition","filterDefinitionName","selected_agg","calculation","filterId","aggregationId","limit","Percentiles","percentile","this_is_query_editor","getFilterDefinitions","got_filters","known_filters","datasource","then","fds","forEach","fd","getSpecificGroupingOptions","groupings","x","getFDAggs","aggregations","getCalculationOptions","calculations","render","show_grouping_ops","grouping_ops","grouping_filters","grouping_filters_tbl","incomplete_intervals","InlineField","labelWidth","tooltip","InlineSwitch","onChange","onIncompleteIntervalsChange","recalc_intervals","onShouldRecalculateChange","shouldRecalculate","InlineFieldRow","onLongChange","longResult","onGroupingLabelChange","variables","getTemplateSrv","getVariables","basic","type","mq","gfm","rand_id","groupingName","trim","description","isDisabled","unshift","all_names","Set","keys","grouping_filter_mapping","selected","find","force_exclude","force_include","included","grouping_filter_includes","tr","td","width","InlineLabel","textAlign","verticalAlign","Checkbox","disabled","q","onGroupingFilterIncludeChange","currentTarget","checked","Select","isClearable","allowCustomValue","onGroupingFilterMapSelectChange","div","display","marginRight","flexDirection","minWidth","height","h4","table","thead","th","tbody","filter_field","onFilterDefinitionChange","onBlur","className","HorizontalGroup","align","justify","spacing","VerticalGroup","onSpecificGroupingChange","onIncludeAggChange","onFDAggChange","onAggChange","Input","min","max","step","onPercentileChange","RadioButtonGroup","onLimitTypeChange","onLimitChange","alias","onAliasChange","hidden","constructor","super","styles","getStyles","event","sel_fd_agg","sel_agg","grouping_filter_mapping_str","new_agg","includes","num","parseFloat","parseInt","grp","str","entries","mode","bind","Math","random","substr","datasourceId","stylesFactory","upper","VariableEditor","refId","DataSource","DataSourceWithBackend","applyTemplateVariables","scopedVars","curr","rel","hasany","fast_mode","kv","val","fi","grouping","filters","returnGroupingValues","matching","current","groupingFilters","getResource","getDefaultQuery","_","metricFindQuery","postResource","frame","text","instanceSettings","getType","VariableSupportType","Custom","editor","request","queries","targets","uniqueId","QueryEditor","plugin","DataSourcePlugin","setConfigEditor","onOptionsChange","secureJsonFields","secureJsonData","SecretInput","isConfigured","apiKey","placeholder","onReset","setQueryEditor"],"sourceRoot":""}