
# events {
#      worker_connections  1024;
# }

upstream account_service {
    server account_service-1 localhost:8000;
}

upstream profiles_service {
    server profiles_service-1 localhost:8001;
}

http {
    server {
        listen 80 http2;
        listen [::]80;
        access_log logs/access.log main;
    }

    location /hello.account_service {
        grpc_pass grpc://account_service;
    }
}

#   location /.account_service {
        #     grpc_pass grpc::/account_service:8000;
        #     error_page 502 = /error502grpc;
        # }
#         location /.profile_service {
#             grpc_pass grpc::/account_service:8001;
#             error_page 502 = /error502grpc;
#         }
#         location = /error502grpc {
#                 internal;
#                 default_type application/grpc;
#                 add_header grpc-status 14;
#                 add_header grpc-message "unavailable";
#                 return 204;
#         }                                                                                                               
#     }       
# }

